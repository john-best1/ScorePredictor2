@model FixturesViewModel

@{
    ViewData["Title"] = "Home Page";
}


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
<link href="~/css/jquery-ui.min.css" rel="stylesheet" />
@section Styles {
    <link href="@Url.Content("~/css/home.css")" rel="stylesheet" type="text/css" />
}
<script>
    $("document").ready(function () {
        $(".head").click(function () {
            $(this).find('th').toggleClass('active');
        });
    });
</script>

<table class="col-lg-8 col-lg-offset-2">
    <tr class="toprow" style="width:100%">
        <td></td>
        <td></td>     @* STYLE HACK *@
        <td class="datepicker">
            <input label="Date: " type="text" id="myDatepicker"
                   placeholder="@Model.date.DayOfWeek    @Model.date.Day/@Model.date.Month/@Model.date.Year" />
        </td>
    </tr>

    @if (@Model.fixtureLists.Any(i => i != null))
    {

        @foreach (FixtureList list in @Model.fixtureLists)
        {
            @if (list != null)
            {
                <tr class="head" data-toggle="collapse" data-target=".fixtures_@list.fixtures[0].leagueId">
                    <td class="flag"><img src="@list.imageUrl"></td>
                    <th colspan="2">@list.leagueName</th>
                </tr>
                @for (int i = 0; i < list.fixtures.Count; i++)
                {
                    <tr class="collapse fixtures_@list.fixtures[0].leagueId">
                        <td class="time">@DateTime.Parse(list.fixtures[i].utcDate).ToShortTimeString()</td>
                        <td class="details">@list.fixtures[i].homeTeamName V @list.fixtures[i].awayTeamName</td>
                        <td class="details">
                            <a class="btn btn-primary" asp-controller="Match" asp-action="Match" asp-route-matchId="@list.fixtures[i].matchId"
                               asp-route-flagUrl="@list.imageUrl">Match Details</a>
                        </td>
                    </tr>
                }
            }
        }
    }
    else
    {
        <tr class="nofixturesrow">
            <td class="nofixtures"><h2>No Fixtures, Select Another Date</h2></td>
        </tr>
    }
</table>


    <script>
        $("#myDatepicker").datepicker({
            minDate: '-7D',
            maxDate: '+3D',
            onSelect: function () {
                date = new Date(this.value);
                url = "?dateString=" + date.toString();
                console.log(url);
                index = window.location.href.indexOf("/");
                window.location.href = window.location.href.substring(0, index) + url;
            }
        });
    </script>


